@model GloboDiet.ViewModels.MealElementCreateEdit
@inject GloboDiet.Services.LookupData LookupData
@using Microsoft.AspNetCore.Mvc.Rendering
@using GloboDiet.Models
@{
    var DropdownIngredientsFiltered = new SelectList(LookupData.ListOfAllIngredients.Where(x => x.Group == "03"), "Id", "Label"); 
}

<h4>MealElement</h4>

<form asp-action="MealElement3Edit">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <div class="form-group">
        <input asp-for="IsCachedOnly" hidden />
        <input asp-for="MealId" hidden />
        <label asp-for="Id" class="control-label"></label>
        <input asp-for="Id" class="form-control alert-danger" readonly="readonly" />
    </div>
    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control alert-danger" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Quantity" class="control-label"></label>
        <input asp-for="Quantity" class="form-control alert-primary" />
        <span asp-validation-for="Quantity" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="IngredientGroupId" class="control-label"></label>
        <select asp-for="IngredientGroupId" id="groups" class="js-example-basic-single" style="width: 50%" asp-items=@IngredientGroup.Dropdown autofocus>
            <option selected disabled value="">Please select</option>
        </select>
        <span asp-validation-for="IngredientGroupId" class="text-danger"></span>
    </div>


    <div class="form-group">
        <label asp-for="IngredientId" class="control-label"></label>
        <select asp-for="IngredientId" id="ingredients" class="js-example-basic-single" style="width: 50%" asp-items=DropdownIngredientsFiltered autofocus>
            <option selected disabled value="">Please select</option>
        </select>
        <span asp-validation-for="IngredientId" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="BrandnameId" class="control-label"></label>
        <select asp-for="BrandnameId" id="brandnames" class="js-example-basic-single" style="width: 50%" asp-items=@Brandname.Dropdown autofocus>
            <option selected disabled value="">Please select</option>
        </select>
        <span asp-validation-for="BrandnameId" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label class="control-label">image</label>
        <img src="@Model.FoodImagePath" width="40" height="40" />
        <input asp-for="FoodImageId" hidden />
        <input type="submit" value="+" name="submit" class="btn btn-info" formaction="/Home/ImageSelector4Create" />
    </div>

    <partial name="/Views/Shared/_OkCancelButtons.cshtml" />
</form>
<script type="text/javascript">
    $(document).ready(function () {
        $("#groups").on("change", function () {

            //$list = $("#ingredients");
            //$.ajax({
            //    url: "/getCities",
            //    type: "GET",
            //    data: { id: $("#groups").val() }, //id of the state which is used to extract cities
            //    traditional: true,
            //    success: function (result) {
            //        $list.empty();
            //        $.each(result, function (i, item) {
            //            $list.append('<option value="' + item["CityId"] + '"> ' + item["Name"] + ' </option>');
            //        });
            //    },
            //    error: function () {
            //        alert("Something went wrong call the police");
            //    }
            //});
        });
    });
</script>